listen:
  port: 4040
  address: "0.0.0.0"

consul:
  enable: false

namespaces:
- name: "lite_atreus"
  format: '$remote_addr - - [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent"'
  source_files:
    - /var/log/nginx/access.log
  relabel_configs:
  - target_label: request_uri
    from: request
    split: 2
    matches:
    # Home
    - regexp: "^/?$"
      replacement: "/"
    # Home with args
    - regexp: "^/([?].*)$"
      replacement: "/"
    # Shell
    - regexp: "^/sw-shell.atreus.html([?].*)?$"
      replacement: "/sw-shell.atreus.html"
    # Service Worker
    - regexp: "^/service-worker.js([?].*)?$"
      replacement: "/service-worker.js"
    # Hot
    - regexp: "^/hot([?/].*)?$"
      replacement: "/hot"
    # Category
    - regexp: "^/p([?/].*)?$"
      replacement: "/p"
    # Content
    - regexp: "^/content([?/].*)?$"
      replacement: "/content"
    # Myorder
    - regexp: "^/myorder([?/].*)?$"
      replacement: "/myorder"
    # Notifcenter
    - regexp: "^/notif-center([?/].*)?$"
      replacement: "/notif-center"
    # Action
    - regexp: "^/action([?/].*)?$"
      replacement: "/action"
    # Onboard
    - regexp: "^/onboard([?/].*)?$"
      replacement: "/onboard"
    # Appcheck
    - regexp: "^/appcheck([?/].*)?$"
      replacement: "/appcheck"
    # AfterSQ
    - regexp: "^/after_sq([?/].*)?$"
      replacement: "/after_sq"
    # BroadcastChat
    - regexp: "^/broadcast-chat([?/].*)?$"
      replacement: "/broadcast-chat"
    # Cart
    - regexp: "^/cart([?/].*)?$"
      replacement: "/cart"
    # BeliLangsung
    - regexp: "^/beli-langsung([?/].*)?$"
      replacement: "/beli-langsung"
    # Catalog
    - regexp: "^/catalog([?/].*)?$"
      replacement: "/catalog"
    # PDP
    - regexp: "^/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)([?/].*)?$"
      replacement: "/shop-page/product-detail"
    # Unknown
    - regexp: "/.*"
      replacement: "/unknown"